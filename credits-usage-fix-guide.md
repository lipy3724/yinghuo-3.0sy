# 积分使用情况页面修复指南

## 问题描述

积分使用情况页面无法正常显示数据，页面打开后只显示空白内容。

## 问题分析

经过系统检查，发现以下几点：

1. 数据库中的积分使用记录表 `feature_usages` 存在且有数据
2. 前端页面 `credits-usage.html` 代码正常，包含所有必要的函数
3. 后端API路由 `/api/credits/usage` 正确配置并可以访问
4. 服务器已正确注册积分相关路由

根据检查结果，可能的问题原因包括：

- 用户未登录或登录状态异常
- API请求发送失败或返回错误
- 浏览器缓存或网络问题
- 前端页面渲染逻辑错误

## 解决方案

我们创建了一个测试页面 `test-credits-usage.html` 来帮助诊断和解决问题。请按照以下步骤操作：

### 1. 使用测试页面

1. 确保服务器正在运行
2. 在浏览器中访问: `http://您的域名/test-credits-usage.html`
3. 点击"测试认证状态"按钮检查登录状态
4. 点击"测试积分API"按钮测试积分API
5. 查看调试信息区域了解详细信息

### 2. 根据测试结果解决问题

#### 如果认证测试失败：

1. 重新登录系统
2. 确认登录后localStorage中是否正确保存了authToken和用户信息
3. 检查登录API是否正常工作

#### 如果API测试失败：

1. 检查服务器日志中是否有相关错误
2. 确认API路由是否正确配置
3. 检查数据库连接是否正常

#### 如果都测试成功但主页面仍不显示：

1. 清除浏览器缓存和Cookie
2. 使用浏览器开发者工具检查控制台错误
3. 检查网络请求是否正常发送和接收

### 3. 修复后的验证

1. 重启服务器
2. 清除浏览器缓存
3. 重新登录系统
4. 访问积分使用情况页面 `http://您的域名/credits-usage.html`

## 预防措施

为防止类似问题再次发生，建议：

1. 在前端页面添加更详细的错误处理和日志记录
2. 实现前端状态监控，及时捕获和报告异常
3. 为关键API添加健康检查机制
4. 定期检查和清理用户积分使用记录

## 技术说明

本修复方案主要针对前端页面和API交互问题。通过创建专用的测试页面，可以有效隔离和定位问题所在，而不影响生产环境。

如果按照上述步骤仍无法解决问题，请检查服务器日志以获取更详细的错误信息，或联系技术支持团队进行进一步排查。
